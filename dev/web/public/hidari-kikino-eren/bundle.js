!function(e){var t={};function s(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=t,s.d=function(e,t,o){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(o,n,function(t){return e[t]}.bind(null,n));return o},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=0)}([function(e,t){!function(){const e=window.matchMedia("(min-width: 800px)"),t=e=>new Promise(t=>{setTimeout(()=>{t()},e)});setPosition=e=>{let t=document.querySelector(".js-charaList").children[0].clientWidth;return-t*e+(window.innerWidth-t)/2};const s={termPosition:{start:setPosition(2),end:setPosition(6)},steps:{step1:setPosition(2),step2:setPosition(2)+(setPosition(5)-setPosition(2))/3,step3:setPosition(2)+(setPosition(5)-setPosition(2))/3*2,step4:setPosition(5)},execute(){let s=this.termPosition.start;const o=this.termPosition.end,n=this.termPosition.start,i=this.steps,r=document.querySelector(".js-charaList"),c=()=>{document.querySelector(".js-kv").classList.toggle("is-closed")},l=()=>{let e=Array.from(r.children).shift();r.appendChild(e)};e.matches||setInterval(()=>{r.style.transform=`translateX(${s-=1.5}px)`;let e=r.style.transform.replace(/[^-^0-9^\.]/g,"");s<o&&(s=n),e>i.step2&&(r.classList.contains("is-step1")||(r.classList.remove("is-step4"),r.classList.add("is-step1"),c(),t(800).finally((function(){l(),c()})))),i.step2>e&&e>i.step3&&(r.classList.contains("is-step2")||(r.classList.remove("is-step1"),r.classList.add("is-step2"),c(),t(800).finally((function(){l(),c()})))),i.step3>e&&e>i.step4&&(r.classList.contains("is-step3")||(r.classList.remove("is-step2"),r.classList.add("is-step3"),c(),t(800).finally((function(){l(),c()})))),i.step4>e&&(r.classList.contains("is-step4")||(r.classList.remove("is-step3"),r.classList.add("is-step4"),c(),t(800).finally((function(){l(),c()}))))},30)}},o={setInitPosition(){$(window).width()<800&&(document.querySelector(".js-charaList").style.transform=`translateX(${setPosition(2)}px)`)},loading(){const o=document.querySelectorAll("img"),n=document.querySelector(".js-loadingWrap");let i=(window.innerHeight-document.querySelector(".js-loadingWrap").clientHeight)/2-$(".js-loadingWrap").offset().top,r=[],c=0;const l=document.querySelectorAll(".js-scaleItem"),a=document.querySelector(".js-loading"),d=document.querySelector(".js-kv");n.style.transform=`translate(-50%, ${i}px)`;for(var u=0;u<o.length;u++)r.push(o[u].src),o[u].src="";o.forEach(n=>{n.addEventListener("load",()=>{c+=1/o.length,l.forEach(e=>{e.style.transform=`scaleX(${c})`}),c>=1&&t(1e3).then(()=>(l.forEach(e=>{e.classList.add("is-loaded")}),a.classList.add("is-loaded"),t(1200))).then(()=>(d.classList.add("is-onScreen"),(()=>{const e=document.querySelectorAll(".js-fadeIn"),t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("is-onScreen"),t.unobserve(e.target))})},{root:null,rootMargin:"0px",threshold:.2});e.forEach(e=>{t.observe(e)})})(),t(2e3))).finally(()=>{s.execute(e)})},{once:!0})});for(u=0;u<o.length;u++)o[u].src=r[u]},startLoop(){this.setInitPosition(),this.loading()}},n={targets:{modal:document.querySelector(".js-modal"),modalBackground:document.querySelector(".js-modalBg"),clickTarget:document.querySelector(".js-relation")},lock(e){e.preventDefault()},scrollOff(){document.addEventListener("mousewheel",this.lock,{passive:!1}),document.addEventListener("touchmove",this.lock,{passive:!1})},scrollOn(){document.removeEventListener("mousewheel",this.lock,{passive:!1}),document.removeEventListener("touchmove",this.lock,{passive:!1})},open(){n.targets.modal.classList.add("is-opened"),n.targets.modalBackground.classList.add("is-opened"),n.scrollOff()},close(e){"modalClose"===e.target.getAttribute("data-modal")&&(this.targets.modal.classList.remove("is-opened"),this.targets.modalBackground.classList.remove("is-opened"),this.scrollOn())},modalControl(){e.matches?(n.targets.clickTarget.addEventListener("click",n.open),window.addEventListener("click",e=>{n.close(e)})):(n.targets.modal.classList.remove("is-opened"),n.targets.modalBackground.classList.remove("is-opened"),n.targets.clickTarget.removeEventListener("click",n.open),window.removeEventListener("click",e=>{n.close(e)}),n.scrollOn())},execute(){e.addListener(this.modalControl),this.modalControl(e)}},i=e=>{const t=document.querySelectorAll(".js-menuNav");e.matches?t.forEach(e=>{e.classList.replace("c-squareButton--animeH","c-squareButton--animeV")}):t.forEach(e=>{e.classList.replace("c-squareButton--animeV","c-squareButton--animeH")})};window.addEventListener("beforeunload",(function(){window.scrollTo(0,0)})),document.querySelector(".js-menuBtn").addEventListener("click",(function(){this.classList.toggle("is-open"),document.querySelector(".js-menu").classList.toggle("is-open")})),n.execute(),(()=>{const e=document.querySelector(".js-header"),t=document.querySelectorAll(".js-tab"),s=document.querySelectorAll(".js-pages"),o=document.querySelector(".p-story").classList;let n=()=>.935*(document.querySelector(".js-story").offsetTop-document.querySelector(".js-header").clientHeight);for(let e=0;e<t.length;e++)t[e].addEventListener("click",(function(e){this.classList.contains("is-active")||(s.forEach(e=>{e.classList.toggle("is-active")}),t.forEach(e=>{e.classList.toggle("is-active")}),window.scroll({top:n(),behavior:"smooth"})),o.contains("is-prologue")?o.replace("is-prologue","is-main"):o.replace("is-main","is-prologue")}));window.addEventListener("resize",()=>{n()}),window.addEventListener("scroll",()=>{window.scrollY>n()?e.classList.add("is-hide"):e.classList.remove("is-hide")})})(),o.startLoop(),e.addListener(i),i(e)}()}]);